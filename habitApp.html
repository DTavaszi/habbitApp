<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>HabitApp, it's punny.</title>
        <link href="css/style.css" rel="stylesheet">
		<link href="css/bootstrap.css" rel="stylesheet">
    </head>
    <body>
		<div class="container">
		
		
		<div  class="hero-unit">
        <h1>Hello, world!</h1>
        <p>Here's some text you can read.</p>
		<button id="addHabits">Action sequence!</button>
		<p>
		<div id="progressbar"></div>
		<div id="buttonField" class="hero-unit">
		</div>
	  </div>
		
		</div>
    </body>
	<script src="js/jquery-1.9.1.js"></script>
	<script type="text/javascript">
		var someDate = new Date();
		someDate.setDate(someDate.getDate());
		//alert(someDate.getDay());
		
		function promptQuestion(something)
		{
			var sentence=prompt("Please enter " + something,"Programming");

			if (sentence!=null && sentence!="")
			{
				return sentence;
			}
			return "Generic";
		}
		$(function() {
		
	  });
		function createButton(habit, func){			
			var habbitButton = document.createElement("input");
			habbitButton.type = "button";
			habbitButton.style.textAlign="justify";
			habbitButton.value = habit.name;
			habbitButton.style.width="200px";
			habbitButton.onclick = func;
			document.getElementById('buttonField').appendChild(habbitButton);
			
			var plusButton = document.createElement("input");
			plusButton.type = "button";
			plusButton.value = "+";			
			
			document.getElementById('buttonField').appendChild(plusButton);
			$('#buttonField').append($('<br/>'));
			
			
			var counterButton = document.createElement("input");
			counterButton.type = "button";
			counterButton.style.textAlign="center";
			counterButton.style.width="200px";
			counterButton.onclick = func;
			document.getElementById('buttonField').appendChild(counterButton);
			$('#buttonField').append($('<p/>'));
			$('#buttonField').append($('<hr>'));
			
			plusButton.onclick = function () 
								{ 									
									return (function (button)
										{
											if(habit.counter < habit.target)
											{
												habit.counter++;
												button.value = habit.counter;
											}											
										})(counterButton)
								};
			}

		function newHabit(habits) {
			var hName = promptQuestion("name");
			var hTarget = promptQuestion("target");
			/*var counter = (function () { var value = 0;
				return function () 
					{ return value++ 
				} 
			})();*/

			habits.push({name : hName, counter : 0, target : hTarget});
			
			createButton(habits[habits.length-1]);
			
		}
		window.onload = function(){
			var myHabits = [];
			// {name : habit, curr : curr, target : target}
			document.getElementById('addHabits').onclick = function () { return newHabit(myHabits) };
			
			$("#progressbar").progressbar({
			  value: 37
			});
		}
		
		
	</script>
</html>